openapi: 3.1.0
info:
  title: Databiomics avatar-builder service
  version: 0.3.0
paths:
  /health:
    get:
      summary: Health check
      responses:
        '200': { description: OK }
  /metrics:
    get:
      summary: Service counters
      responses:
        '200': { description: Metrics payload }
  /v1/events/outbox:
    get:
      summary: Lista Ãºltimos eventos de outbox
      responses:
        '200': { description: Outbox events }
  /avatars:
    post:
      summary: Cria avatar onboarding
      responses:
        '200': { description: Avatar criado }
  /avatars/{avatar_id}/uploads:
    post:
      summary: Registra uploads de facescan/talk/photos/body
      responses:
        '200': { description: Upload registrado }
  /avatars/{avatar_id}/qc:
    post:
      summary: Executa quality check
      responses:
        '200': { description: QC executado }
  /avatars/{avatar_id}/liveness:
    post:
      summary: Executa desafio de liveness
      responses:
        '200': { description: Liveness executado }
  /avatars/{avatar_id}/build:
    post:
      summary: Inicia build com similarity gate e preview
      responses:
        '200': { description: Build processado }
  /avatars/{avatar_id}:
    get:
      summary: Consulta estado do avatar
      responses:
        '200': { description: Avatar }
